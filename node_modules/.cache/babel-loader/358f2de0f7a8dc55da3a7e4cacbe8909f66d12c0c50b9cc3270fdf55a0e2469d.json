{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mingoo/Documents/GitHub/search/image-search/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mingoo/Documents/GitHub/search/image-search/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _taggedTemplateLiteral from\"/Users/mingoo/Documents/GitHub/search/image-search/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import{bookSearch}from'./api';import{useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{changeSearch}from\"./store\";import{changeQuery}from'./store';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Box=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin:auto;\\n\"])));var Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\nwidth:100%;\\nheight:50px;\\nbackground:#F1D3B3;\\ndisplay: flex;\\nalign-items: center;\\njustify-content: center;\\n\\n\"])));var SearchBox=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display:flex;\\n  flex-wrap:wrap;\\n  width : 100%;\\n  margin:auto;\\n\\n\"])));var SearchItemBox=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n   width:20%;\\n   height:100%;\\n\"])));var SearchItems=styled.img(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\nwidth:100%;\\ncursor:pointer;\\n\\n\"])));function SearchList(){var states=useSelector(function(state){return state;});var dispatch=useDispatch();console.log(states);useEffect(function(){if(states.searchQuery.length>0){seachHandler(true);}},[states.searchQuery]);var seachHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var params,_yield$bookSearch,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;//parameter\nparams={query:states.searchQuery,sort:'accuracy',page:1,size:40};_context.next=4;return bookSearch(params);case 4:_yield$bookSearch=_context.sent;data=_yield$bookSearch.data;dispatch(changeSearch(data.documents));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);alert(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function seachHandler(){return _ref.apply(this,arguments);};}();var handleOnKeyPress=function handleOnKeyPress(e){if(e.key=='Enter'){searchImage(e.target.value);}};var searchImage=function searchImage(text){dispatch(changeQuery(text));};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onKeyUp:handleOnKeyPress})]}),/*#__PURE__*/_jsx(SearchBox,{children:states.searchData.map(function(items){return/*#__PURE__*/_jsx(SearchItemBox,{children:/*#__PURE__*/_jsx(SearchItems,{src:items.thumbnail_url})},items.image_url);})})]});}export default SearchList;","map":{"version":3,"names":["bookSearch","useEffect","useDispatch","useSelector","changeSearch","changeQuery","styled","Box","div","Header","SearchBox","SearchItemBox","SearchItems","img","SearchList","states","state","dispatch","console","log","searchQuery","length","seachHandler","params","query","sort","page","size","data","documents","alert","handleOnKeyPress","e","key","searchImage","target","value","text","searchData","map","items","thumbnail_url","image_url"],"sources":["/Users/mingoo/Documents/GitHub/search/image-search/src/SearchList.js"],"sourcesContent":["import { bookSearch } from './api';\nimport { useEffect} from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {changeSearch} from \"./store\";\nimport { changeQuery } from './store';\nimport styled from 'styled-components'\n\nlet Box = styled.div`\n  margin:auto;\n`\nlet Header = styled.div`\nwidth:100%;\nheight:50px;\nbackground:#F1D3B3;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\n\n`\nlet SearchBox = styled.div`\n  display:flex;\n  flex-wrap:wrap;\n  width : 100%;\n  margin:auto;\n\n`\n\nlet SearchItemBox = styled.div`\n   width:20%;\n   height:100%;\n`\nlet SearchItems = styled.img`\nwidth:100%;\ncursor:pointer;\n\n`\n\nfunction SearchList(){\n    let states = useSelector((state) => {return state});\n    let dispatch = useDispatch()\n\n    console.log(states);    \n    \n    useEffect(() => {\n        if(states.searchQuery.length > 0){\n            seachHandler(true)\n        }\n    },[states.searchQuery]);\n\n    const seachHandler = async () => {\n        try{\n          //parameter\n          const params = {\n            query : states.searchQuery,\n            sort : 'accuracy',\n            page : 1,\n            size : 40,\n          }\n          const {data} = await bookSearch(params);\n          dispatch(changeSearch(data.documents));\n        } catch (e){\n            alert(e);\n        }\n    };\n\n    const handleOnKeyPress = e => {\n        if(e.key == 'Enter'){\n            searchImage(e.target.value);\n        }\n    }\n    const searchImage = (text) => {\n        dispatch(changeQuery(text));\n    }\n\n    return(\n        <Box>\n            <Header>\n            <p>검색어를 입력해주세요!</p>\n            <input type=\"text\" onKeyUp={handleOnKeyPress}></input>\n            </Header>\n            <SearchBox>\n              {\n                states.searchData.map((items) => {\n                  return(\n                   <SearchItemBox key={items.image_url}>\n                    <SearchItems src={items.thumbnail_url}></SearchItems>\n                   </SearchItemBox>\n                        )\n                })\n              }\n            </SearchBox>\n        </Box>\n        \n    )\n}\n\nexport default SearchList;\n    \n\n"],"mappings":"ghBAAA,OAASA,UAAU,KAAQ,OAAO,CAClC,OAASC,SAAS,KAAO,OAAO,CAChC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAAQC,YAAY,KAAO,SAAS,CACpC,OAASC,WAAW,KAAQ,SAAS,CACrC,MAAOC,OAAM,KAAM,mBAAmB,yFAEtC,GAAIC,IAAG,CAAGD,MAAM,CAACE,GAAG,mFAEnB,CACD,GAAIC,OAAM,CAAGH,MAAM,CAACE,GAAG,uLAQtB,CACD,GAAIE,UAAS,CAAGJ,MAAM,CAACE,GAAG,4IAMzB,CAED,GAAIG,cAAa,CAAGL,MAAM,CAACE,GAAG,qGAG7B,CACD,GAAII,YAAW,CAAGN,MAAM,CAACO,GAAG,qGAI3B,CAED,QAASC,WAAU,EAAE,CACjB,GAAIC,OAAM,CAAGZ,WAAW,CAAC,SAACa,KAAK,CAAK,CAAC,MAAOA,MAAK,EAAC,CAAC,CACnD,GAAIC,SAAQ,CAAGf,WAAW,EAAE,CAE5BgB,OAAO,CAACC,GAAG,CAACJ,MAAM,CAAC,CAEnBd,SAAS,CAAC,UAAM,CACZ,GAAGc,MAAM,CAACK,WAAW,CAACC,MAAM,CAAG,CAAC,CAAC,CAC7BC,YAAY,CAAC,IAAI,CAAC,CACtB,CACJ,CAAC,CAAC,CAACP,MAAM,CAACK,WAAW,CAAC,CAAC,CAEvB,GAAME,aAAY,4FAAG,uLAEf;AACMC,MAAM,CAAG,CACbC,KAAK,CAAGT,MAAM,CAACK,WAAW,CAC1BK,IAAI,CAAG,UAAU,CACjBC,IAAI,CAAG,CAAC,CACRC,IAAI,CAAG,EACT,CAAC,uBACoB3B,WAAU,CAACuB,MAAM,CAAC,wCAAhCK,IAAI,mBAAJA,IAAI,CACXX,QAAQ,CAACb,YAAY,CAACwB,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,+EAErCC,KAAK,aAAG,CAAC,oEAEhB,kBAdKR,aAAY,0CAcjB,CAED,GAAMS,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAGC,CAAC,CAAI,CAC1B,GAAGA,CAAC,CAACC,GAAG,EAAI,OAAO,CAAC,CAChBC,WAAW,CAACF,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,CAC/B,CACJ,CAAC,CACD,GAAMF,YAAW,CAAG,QAAdA,YAAW,CAAIG,IAAI,CAAK,CAC1BpB,QAAQ,CAACZ,WAAW,CAACgC,IAAI,CAAC,CAAC,CAC/B,CAAC,CAED,mBACI,MAAC,GAAG,yBACA,MAAC,MAAM,yBACP,qFAAmB,cACnB,cAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAEN,gBAAiB,EAAS,GAC7C,cACT,KAAC,SAAS,WAENhB,MAAM,CAACuB,UAAU,CAACC,GAAG,CAAC,SAACC,KAAK,CAAK,CAC/B,mBACC,KAAC,aAAa,wBACb,KAAC,WAAW,EAAC,GAAG,CAAEA,KAAK,CAACC,aAAc,EAAe,EADlCD,KAAK,CAACE,SAAS,CAEnB,CAEnB,CAAC,CAAC,EAEM,GACV,CAGd,CAEA,cAAe5B,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}